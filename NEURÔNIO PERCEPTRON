#include <stdio.h>
#include <stdlib.h>
#include <time.h>


int main(){
   
    //int l,c;
    //scanf("%d%d",&l,&c);
    float m[30][4];
   
    int i, j;
    //inicializando matriz
   /* for(i=0;i<l;i++){
       
        for(j=0;j<c;j++){
           
            printf("digite um valor para a tabela ");
            scanf("%f",&m[i][j]);
        }
    printf("\n");
       
    }*/
 
m[0][0]=-0.6508;m[0][1]=0.1097;m[0][2]=4.0009;m[0][3]=-1;
m[1][0]=-1.4492;m[1][1]=0.8896;m[1][2]=4.4005;m[1][3]=-1;
m[2][0]=2.085;m[2][1]=0.6876;m[2][2]=12.071;m[2][3]=-1;
m[3][0]=0.2626;m[3][1]=1.1476;m[3][2]=7.7985;m[3][3]=1;
m[4][0]=0.6418;m[4][1]=1.0234;m[4][2]=7.0427;m[4][3]=1;
m[5][0]=0.2569;m[5][1]=0.673;m[5][2]=8.3265;m[5][3]=-1;
m[6][0]=1.1155;m[6][1]=0.6043;m[6][2]=7.4446;m[6][3]=1;
m[7][0]=0.0914;m[7][1]=0.3399;m[7][2]=7.0677;m[7][3]=-1;
m[8][0]=0.0121;m[8][1]=0.5256;m[8][2]=4.6316;m[8][3]=1;
m[9][0]=-0.0429;m[9][1]=0.466;m[9][2]=5.4323;m[9][3]=1;
m[10][0]=0.434;m[10][1]=0.687;m[10][2]=8.2287;m[10][3]=-1;
m[11][0]=0.2735;m[11][1]=1.0287;m[11][2]=7.1934;m[11][3]=1;
m[12][0]=0.4839;m[12][1]=0.4851;m[12][2]=7.485;m[12][3]=-1;
m[13][0]=0.4089;m[13][1]=-0.1267;m[13][2]=5.5019;m[13][3]=-1;
m[14][0]=1.4391;m[14][1]=0.1614;m[14][2]=8.5843;m[14][3]=-1;
m[15][0]=-0.9115;m[15][1]=-0.1973;m[15][2]=2.1962;m[15][3]=-1;
m[16][0]=0.3654;m[16][1]=1.0475;m[16][2]=7.4858;m[16][3]=1;
m[17][0]=0.2144;m[17][1]=0.7515;m[17][2]=7.1699;m[17][3]=1;
m[18][0]=0.2013;m[18][1]=1.0014;m[18][2]=6.5489;m[18][3]=1;
m[19][0]=0.6483;m[19][1]=0.2183;m[19][2]=5.8991;m[19][3]=1;
m[20][0]=-0.1147;m[20][1]=0.2242;m[20][2]=7.2435;m[20][3]=-1;
m[21][0]=-0.797;m[21][1]=0.8795;m[21][2]=3.8762;m[21][3]=1;
m[22][0]=-1.0625;m[22][1]=0.6366;m[22][2]=2.4707;m[22][3]=1;
m[23][0]=0.5307;m[23][1]=0.1285;m[23][2]=5.6883;m[23][3]=1;
m[24][0]=-1.22;m[24][1]=0.7777;m[24][2]=1.7252;m[24][3]=1;
m[25][0]=0.3957;m[25][1]=0.1076;m[25][2]=5.6623;m[25][3]=-1;
m[26][0]=-0.1013;m[26][1]=0.5989;m[26][2]=7.1812;m[26][3]=-1;
m[27][0]=2.4482;m[27][1]=0.9455;m[27][2]=11.2095;m[27][3]=1;
m[28][0]=2.0149;m[28][1]=0.6192;m[28][2]=10.9263;m[28][3]=-1;
m[29][0]=0.2012;m[29][1]=0.2611;m[29][2]=5.4631;m[29][3]=1;



   

    //printando matriz
    for(i=0;i<30;i++){
       
        for(j=0;j<4;j++){
           
            printf(" %f ",m[i][j]);
        }
    printf("\n");    
    }
   
    float w1=0.536, w2=0.989, w3=0.156, teta=0.899, y, r, erro, N, epoca=0;
    //atribui valores aleatórios para w1,w2,w3,
   
    /*srand(time(NULL));
    w1=(1/(rand() % 10));
    w2=(1/(rand() % 10));
    w3=(1/(rand() % 10));
    teta=(1/(rand() % 10));*/
   
    printf("w1=%f W2=%f W3=%f teta=%f \n",w1,w2,w3,teta);
    printf("Determine o passo de correção do erro \n");
    scanf("%f",&N);
   
    //treinando o neurônio
    for(i=0;i<30;i++){
        y=(m[i][0]*w1)+(m[i][1]*w2)+(m[i][2]*w3)-teta;
       
        if(y>0){r=1;}
        else if(y<=0){r=-1;}
       
        erro=m[i][3]-r;
       
        if(erro!=0){
            w1=w1+N*erro*m[i][0];
            w2=w2+N*erro*m[i][1];
            w3=w3+N*erro*m[i][2];
            teta=teta+N*erro*(-1);
            i=0;
            printf("w1=%f w2=%f w3=%f teta=%f\n",w1,w2,w3,teta);
           
        }
       
       epoca++;
       
       if(epoca>=100000){
           printf("neurônio não está treinado\n");
           return 1;
       }
    }
    printf("Neurônio treinado\n Peso1=%f\n Peso2=%f\n Peso3=%f\n teta=%f\n Epoca=%f",w1,w2,w3,teta,epoca);
   return 0;
}
